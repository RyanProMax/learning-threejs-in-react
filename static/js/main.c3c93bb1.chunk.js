(this["webpackJsonplearning-threejs-in-react"]=this["webpackJsonplearning-threejs-in-react"]||[]).push([[0],{132:function(e,n,t){},133:function(e,n,t){},278:function(e,n,t){"use strict";t.r(n);var r=t(119),o=t.n(r),i=(t(132),t(133),t(10)),a=t(120),c=t.n(a),s=t(7);function d(e){var n=e.data,t=Object(i.h)(),r=Object(i.g)(),o=function(e){return function(){r.push(e)}};return Object(s.jsx)("div",{className:"side-bar",children:n.map((function(e,n){var r=e.name,i=e.children;return i.length&&Object(s.jsxs)("ul",{className:"side-bar__wrapper",children:[Object(s.jsx)("p",{className:"side-bar__title",children:r}),i.map((function(e,n){var r=e.name,i=e.path;return Object(s.jsx)("p",{onClick:o(i),className:c()("side-bar__sub-title",{"side-bar__sub-title--active":t.pathname===i}),children:r},n)}))]},n)}))})}var l=t(5),u=t(2);var p=t(14);function h(){var e=Date.now(),n=e,t=0,r=1/0,o=0,i=0,a=1/0,c=0,s=0,d=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",(function(e){e.preventDefault(),v(++d%2)}),!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(u);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",u.appendChild(p);var h=document.createElement("div");for(h.id="fpsGraph",h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(h);h.children.length<74;){var w=document.createElement("span");w.style.cssText="width:1px;height:30px;float:left;background-color:#113",h.appendChild(w)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(m);var b=document.createElement("div");b.id="msText",b.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",b.innerHTML="MS",m.appendChild(b);var f=document.createElement("div");for(f.id="msGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(f);f.children.length<74;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#131",f.appendChild(j)}var v=function(e){switch(d=e){case 0:u.style.display="block",m.style.display="none";break;case 1:u.style.display="none",m.style.display="block";break;default:return}},x=function(e,n){e.appendChild(e.firstChild).style.height=n+"px"};return{REVISION:11,domElement:l,setMode:v,begin:function(){e=Date.now()},end:function(){var d=Date.now();return t=d-e,r=Math.min(r,t),o=Math.max(o,t),b.textContent=t+" MS ("+r+"-"+o+")",x(f,Math.min(30,30-t/200*30)),s++,d>n+1e3&&(i=Math.round(1e3*s/(d-n)),a=Math.min(a,i),c=Math.max(c,i),p.textContent=i+" FPS ("+a+"-"+c+")",x(h,Math.min(30,30-i/100*30)),n=d,s=0),d},update:function(){e=this.end()}}}var w=t(30),m=t(123),b=t(16);t(277);var f=t(0),j=t(1);var v=t(127);var x=[{name:"chapter-01",children:[{name:"BasicSkeleton",path:"/BasicSkeleton",component:function(){var e=Object(u.useRef)(null);return Object(u.useEffect)((function(){!function(){var n=new l.p,t=new l.m(45,window.innerWidth/window.innerHeight,.1,1e3),r=new l.u;r.setClearColor(new l.e(0)),r.setSize(window.innerWidth,window.innerHeight);var o=new l.b(20);n.add(o);var i=new l.n(60,20),a=new l.k({color:11184810}),c=new l.j(i,a);c.rotation.x=-.5*Math.PI,c.position.set(15,0,0),n.add(c);var s=new l.c(4,4,4),d=new l.k({color:16711680,wireframe:!0}),u=new l.j(s,d);u.position.set(-4,3,0),n.add(u);var p=new l.q(4,20,20),h=new l.k({color:7829503,wireframe:!0}),w=new l.j(p,h);w.position.set(20,4,2),n.add(w),t.position.set(-30,40,30),t.lookAt(n.position),e.current.appendChild(r.domElement),r.render(n,t)}()}),[]),Object(s.jsx)("div",{ref:e})}},{name:"MaterialsLight",path:"/MaterialsLight",component:function(){var e=Object(u.useRef)(null);return Object(u.useEffect)((function(){!function(){var n=new l.p,t=new l.m(45,window.innerWidth/window.innerHeight,.1,1e3),r=new l.u;r.setClearColor(new l.e(0)),r.setSize(window.innerWidth,window.innerHeight);var o=new l.n(60,20),i=new l.l({color:16777215}),a=new l.j(o,i);a.rotation.x=-.5*Math.PI,a.position.set(15,0,0),n.add(a);var c=new l.c(4,4,4),s=new l.l({color:16711680}),d=new l.j(c,s);d.position.set(-4,3,0),n.add(d);var u=new l.q(4,20,20),p=new l.l({color:7829503}),h=new l.j(u,p);h.position.set(20,4,2),n.add(h);var w=new l.r(16777215);w.position.set(-40,40,-15),w.shadow.mapSize=new l.s(1024,1024),w.shadow.camera.far=130,w.shadow.camera.near=40,n.add(w),w.castShadow=!0,r.shadowMap.enabled=!0,a.receiveShadow=!0,d.castShadow=!0,h.castShadow=!0,t.position.set(-30,40,30),t.lookAt(n.position),e.current.appendChild(r.domElement),r.render(n,t)}()}),[]),Object(s.jsx)("div",{ref:e})}},{name:"MaterialsLightAnimation",path:"/MaterialsLightAnimation",component:function(){var e=Object(u.useRef)(null),n=Object(u.useRef)({step:0}),t=Object(u.useCallback)((function(){var e=n.current,r=e.stats,o=e.scene,i=e.camera,a=e.renderer,c=e.cube,s=e.sphere,d=e.step;r.update(),c.rotation.x+=.02,c.rotation.y+=.02,c.rotation.z+=.02,n.current.step+=.04,s.position.x=20+10*Math.cos(d),s.position.y=2+10*Math.abs(Math.sin(d)),n.current.timer=requestAnimationFrame(t),a.render(o,i)}),[]);return Object(u.useEffect)((function(){return function(){var t=new l.p,r=new l.m(45,window.innerWidth/window.innerHeight,.1,1e3),o=new l.u;o.setClearColor(new l.e(0)),o.setSize(window.innerWidth,window.innerHeight);var i=new l.n(60,20),a=new l.l({color:16777215}),c=new l.j(i,a);c.rotation.x=-.5*Math.PI,c.position.set(15,0,0),t.add(c);var s=new l.c(4,4,4),d=new l.l({color:16711680}),u=new l.j(s,d);u.position.set(-4,3,0),t.add(u);var h=new l.q(4,20,20),w=new l.l({color:7829503}),m=new l.j(h,w);m.position.set(20,4,2),t.add(m);var b=new l.r(16777215);b.position.set(-40,40,-15),b.shadow.mapSize=new l.s(1024,1024),b.shadow.camera.far=130,b.shadow.camera.near=40,t.add(b),b.castShadow=!0,o.shadowMap.enabled=!0,c.receiveShadow=!0,u.castShadow=!0,m.castShadow=!0,r.position.set(-30,40,30),r.lookAt(t.position),e.current.appendChild(o.domElement),o.render(t,r),n.current=Object(p.a)(Object(p.a)({},n.current),{},{scene:t,camera:r,renderer:o,cube:u,sphere:m})}(),function(){var t=new h;t.setMode(0),t.domElement.style.position="absolute",t.domElement.style.right="0px",t.domElement.style.top="0px",e.current.appendChild(t.domElement),n.current.stats=t}(),t(),function(){n.current.timer&&cancelAnimationFrame(n.current.timer)}}),[t]),Object(s.jsx)("div",{ref:e})}},{name:"ControlGui",path:"/ControlGui",component:function(){var e=Object(u.useRef)(null),n=Object(u.useRef)({step:0}),t=Object(u.useState)({rotationSpeed:.02,bouncingSpeed:.03}),r=Object(w.a)(t,2),o=r[0],i=r[1],a=Object(u.useCallback)((function(){var e=n.current,t=e.stats,r=e.scene,i=e.camera,c=e.renderer,s=e.cube,d=e.sphere,l=e.step;e.controls.update(),t.update(),s.rotation.x+=o.rotationSpeed,s.rotation.y+=o.rotationSpeed,s.rotation.z+=o.rotationSpeed,n.current.step+=o.bouncingSpeed,d.position.x=20+10*Math.cos(l),d.position.y=2+10*Math.abs(Math.sin(l)),n.current.timer=requestAnimationFrame(a),c.render(r,i)}),[o]);function c(){var e=n.current,t=e.camera,r=e.renderer;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}return Object(u.useEffect)((function(){return function(){var t=new l.p,r=new l.m(45,window.innerWidth/window.innerHeight,.1,1e3),o=new l.u;o.setClearColor(new l.e(0)),o.setSize(window.innerWidth,window.innerHeight);var i=new l.n(60,20),a=new l.l({color:16777215}),c=new l.j(i,a);c.rotation.x=-.5*Math.PI,c.position.set(15,0,0),t.add(c);var s=new l.c(4,4,4),d=new l.l({color:16711680}),u=new l.j(s,d);u.position.set(-4,3,0),t.add(u);var h=new l.q(4,20,20),w=new l.l({color:7829503}),b=new l.j(h,w);b.position.set(20,4,2),t.add(b);var f=new l.r(16777215);f.position.set(-40,40,-15),f.shadow.mapSize=new l.s(1024,1024),f.shadow.camera.far=130,f.shadow.camera.near=40,t.add(f),f.castShadow=!0,o.shadowMap.enabled=!0,c.receiveShadow=!0,u.castShadow=!0,b.castShadow=!0,r.position.set(-30,40,30),r.lookAt(t.position),e.current.appendChild(o.domElement),o.render(t,r);var j=new m.a(r,o.domElement);n.current=Object(p.a)(Object(p.a)({},n.current),{},{scene:t,camera:r,renderer:o,cube:u,sphere:b,controls:j})}(),function(){var t=new h;t.setMode(0),t.domElement.style.position="absolute",t.domElement.style.right="16px",t.domElement.style.top="60px",e.current.appendChild(t.domElement),n.current.stats=t}(),window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[]),Object(u.useEffect)((function(){return a(),function(){n.current.timer&&(cancelAnimationFrame(n.current.timer),n.current.timer=null)}}),[a]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{ref:e}),Object(s.jsxs)(b.d,{data:o,onUpdate:function(e){i((function(n){return Object(p.a)(Object(p.a)({},n),e)}))},children:[Object(s.jsx)(b.c,{path:"rotationSpeed",label:"RotationSpeed",min:0,max:.1,step:.01}),Object(s.jsx)(b.c,{path:"bouncingSpeed",label:"BouncingSpeed",min:0,max:.1,step:.01})]})]})}}]},{name:"chapter-02",children:[{name:"BasicScene",path:"/BasicScene",component:function(){var e=Object(u.useRef)(null),n=Object(u.useRef)({step:0}),t=Object(u.useState)({}),r=Object(w.a)(t,2),o=r[0],i=r[1],a=Object(u.useCallback)((function(){var e=n.current,t=e.stats,r=e.scene,i=e.camera,c=e.renderer,s=e.plane;t.update(),r.traverse((function(e){e instanceof l.j&&e!==s&&(e.rotation.x+=o.rotationSpeed,e.rotation.y+=o.rotationSpeed,e.rotation.z+=o.rotationSpeed)})),n.current.step+=.04,n.current.timer=requestAnimationFrame(a),c.render(r,i)}),[o]);function c(){var e=n.current,t=e.camera,r=e.renderer;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}return Object(u.useEffect)((function(){return function(){var t=new l.p,r=new l.m(45,window.innerWidth/window.innerHeight,.1,1e3),o=new l.u;o.setClearColor(new l.e(15658734)),o.setSize(window.innerWidth,window.innerHeight),o.shadowMap.enabled=!0;var a=new l.n(60,40,1,1),c=new l.l({color:16777215}),s=new l.j(a,c);s.receiveShadow=!0,s.rotation.x=-.5*Math.PI,s.position.x=0,s.position.y=0,s.position.z=0,t.add(s),r.position.set(-30,40,30),r.lookAt(t.position);var d=new l.a(789516);t.add(d);var u=new l.r(16777215);u.position.set(-40,60,-10),u.castShadow=!0,t.add(u),t.fog=new l.g(16777215,.015,100),e.current.appendChild(o.domElement),o.render(t,r),i(new(function(){function e(){Object(f.a)(this,e),this.rotationSpeed=.02,this.numberOfObjects=t.children.length}return Object(j.a)(e,[{key:"removeCube",value:function(){var e=t.children,n=e[e.length-1];n instanceof l.j&&(t.remove(n),this.numberOfObjects=t.children.length)}},{key:"addCube",value:function(){var e=Math.ceil(3*Math.random()),n=new l.c(e,e,e),r=new l.l({color:16777215*Math.random()}),o=new l.j(n,r);o.castShadow=!0,o.name="cube-"+t.children.length,o.position.x=-30+Math.round(Math.random()*a.parameters.width),o.position.y=Math.round(5*Math.random()),o.position.z=-20+Math.round(Math.random()*a.parameters.height),t.add(o),this.numberOfObjects=t.children.length}},{key:"outputObjects",value:function(){console.log(t.children)}}]),e}())),n.current=Object(p.a)(Object(p.a)({},n.current),{},{scene:t,camera:r,renderer:o,plane:s})}(),function(){var t=new h;t.setMode(0),t.domElement.style.position="absolute",t.domElement.style.right="16px",t.domElement.style.top="120px",e.current.appendChild(t.domElement),n.current.stats=t}(),window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[]),Object(u.useEffect)((function(){return a(),function(){n.current.timer&&(cancelAnimationFrame(n.current.timer),n.current.timer=null)}}),[a]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{ref:e}),Object(s.jsxs)(b.d,{data:o,onUpdate:function(e){i((function(n){return Object(p.a)(Object(p.a)({},n),e)}))},children:[Object(s.jsx)(b.c,{path:"rotationSpeed",label:"RotationSpeed",min:0,max:.1,step:.01}),Object(s.jsx)(b.a,{label:"addCube",onClick:function(){o.addCube()}}),Object(s.jsx)(b.a,{label:"removeCube",onClick:function(){o.removeCube()}}),Object(s.jsx)(b.a,{label:"outputObjects",onClick:function(){o.outputObjects()}})]})]})}},{name:"CustomGeometry",path:"/CustomGeometry",component:function(){var e=Object(u.useRef)(null),n=Object(u.useRef)({}),t=Object(u.useState)({}),r=Object(w.a)(t,2),o=r[0],i=r[1],a=function(e){i((function(n){return Object(p.a)(Object(p.a)({},n),e)}))},c=Object(u.useCallback)((function(){var t=new l.p,r=new l.m(45,window.innerWidth/window.innerHeight,.1,1e3),o=new l.u;o.setClearColor(new l.e(15658734)),o.setSize(window.innerWidth,window.innerHeight),o.shadowMap.enabled=!0;var i=new l.n(60,40,1,1),c=new l.l({color:16777215}),s=new l.j(i,c);s.receiveShadow=!0,s.rotation.x=-.5*Math.PI,s.position.x=0,s.position.y=0,s.position.z=0,t.add(s),r.position.set(-20,25,20),r.lookAt(new l.t(5,0,0));var d=new l.r(16777215);d.position.set(-40,60,10),d.castShadow=!0,t.add(d),e.current.appendChild(o.domElement),o.render(t,r);var u=[new l.t(1,3,1),new l.t(1,3,-1),new l.t(1,-1,1),new l.t(1,-1,-1),new l.t(-1,3,-1),new l.t(-1,3,1),new l.t(-1,-1,-1),new l.t(-1,-1,1)],p=function(e){var n=function(n,t,r){return[e[n],e[t],e[r]]};return[n(0,2,1),n(2,3,1),n(4,6,5),n(6,7,5),n(4,5,1),n(5,0,1),n(7,6,2),n(6,3,2),n(5,7,0),n(7,2,0),n(1,3,4),n(3,6,4)].flat(1)},h=new l.d;h.setFromPoints(p(u)),h.computeVertexNormals();var w=[new l.l({opacity:.6,color:4521796,transparent:!0}),new l.k({color:0,wireframe:!0})],m=Object(v.a)(h,w);m.children.forEach((function(e){e.castShadow=!0})),m.position.setY(1.1),t.add(m);var b=function(e,n,t){return{x:e,y:n,z:t}},f=[];f.push(b(3,5,3)),f.push(b(3,5,0)),f.push(b(3,0,3)),f.push(b(3,0,0)),f.push(b(0,5,0)),f.push(b(0,5,3)),f.push(b(0,0,0)),f.push(b(0,0,3)),a({controlPoints:f}),n.current={scene:t,camera:r,renderer:o,mesh:m,generatePoints:p}}),[]),d=Object(u.useCallback)((function(){var e=n.current,t=e.stats,r=e.scene,i=e.camera,a=e.renderer,c=e.mesh;t.update();var s=o.controlPoints;console.log(s),c.children.forEach((function(e){})),n.current.timer=requestAnimationFrame(d),a.render(r,i)}),[o]);function m(){var e=n.current,t=e.camera,r=e.renderer;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}return Object(u.useEffect)((function(){return c(),function(){var t=new h;t.setMode(0),t.domElement.style.position="absolute",t.domElement.style.right="16px",t.domElement.style.bottom="16px",e.current.appendChild(t.domElement),n.current.stats=t}(),window.addEventListener("resize",m),function(){return window.removeEventListener("resize",m)}}),[c]),Object(u.useEffect)((function(){return d(),function(){n.current.timer&&(cancelAnimationFrame(n.current.timer),n.current.timer=null)}}),[d]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{ref:e}),Object(s.jsxs)(b.d,{data:o,onUpdate:a,children:[o.controlPoints&&o.controlPoints.map((function(e,n){e.x,e.y,e.z;return Object(s.jsxs)(b.b,{title:"Vertices ".concat(n+1),children:[Object(s.jsx)(b.c,{path:"controlPoints.".concat(n,".x"),label:"x",min:-10,max:10,step:1}),Object(s.jsx)(b.c,{path:"controlPoints.".concat(n,".y"),label:"y",min:-10,max:10,step:1}),Object(s.jsx)(b.c,{path:"controlPoints.".concat(n,".z"),label:"z",min:-10,max:10,step:1})]},n)})),Object(s.jsx)(b.a,{label:"addCube",onClick:function(){o.addCube()}})]})]})}}]}];function O(){return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(d,{data:x}),Object(s.jsxs)(i.d,{children:[Object(s.jsx)(i.b,{exact:!0,path:"/",render:function(){return Object(s.jsx)(i.a,{to:"/BasicSkeleton"})}}),x.map((function(e){return e.children})).flat(1).map((function(e,n){var t=e.path,r=e.component;return Object(s.jsx)(i.b,{path:t,component:r},n)}))]})]})}var g=t(80);o.a.render(Object(s.jsx)(g.a,{children:Object(s.jsx)(O,{})}),document.getElementById("root"))}},[[278,1,2]]]);
//# sourceMappingURL=main.c3c93bb1.chunk.js.map