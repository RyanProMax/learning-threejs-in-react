(this["webpackJsonplearning-threejs-in-react"]=this["webpackJsonplearning-threejs-in-react"]||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var r=n(119),i=n.n(r),o=(n(131),n(132),n(10)),a=n(120),c=n.n(a),s=n(7);function d(e){var t=e.data,n=Object(o.h)(),r=Object(o.g)(),i=function(e){return function(){r.push(e)}};return Object(s.jsx)("div",{className:"side-bar",children:t.map((function(e,t){var r=e.name,o=e.children;return o.length&&Object(s.jsxs)("ul",{className:"side-bar__wrapper",children:[Object(s.jsx)("p",{className:"side-bar__title",children:r}),o.map((function(e,t){var r=e.name,o=e.path;return Object(s.jsx)("p",{onClick:i(o),className:c()("side-bar__sub-title",{"side-bar__sub-title--active":n.pathname===o}),children:r},t)}))]},t)}))})}var l=n(5),u=n(2);var p=n(14);function w(){var e=Date.now(),t=e,n=0,r=1/0,i=0,o=0,a=1/0,c=0,s=0,d=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",(function(e){e.preventDefault(),v(++d%2)}),!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(u);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",u.appendChild(p);var w=document.createElement("div");for(w.id="fpsGraph",w.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(w);w.children.length<74;){var h=document.createElement("span");h.style.cssText="width:1px;height:30px;float:left;background-color:#113",w.appendChild(h)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(m);var b=document.createElement("div");b.id="msText",b.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",b.innerHTML="MS",m.appendChild(b);var f=document.createElement("div");for(f.id="msGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(f);f.children.length<74;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#131",f.appendChild(j)}var v=function(e){switch(d=e){case 0:u.style.display="block",m.style.display="none";break;case 1:u.style.display="none",m.style.display="block";break;default:return}},x=function(e,t){e.appendChild(e.firstChild).style.height=t+"px"};return{REVISION:11,domElement:l,setMode:v,begin:function(){e=Date.now()},end:function(){var d=Date.now();return n=d-e,r=Math.min(r,n),i=Math.max(i,n),b.textContent=n+" MS ("+r+"-"+i+")",x(f,Math.min(30,30-n/200*30)),s++,d>t+1e3&&(o=Math.round(1e3*s/(d-t)),a=Math.min(a,o),c=Math.max(c,o),p.textContent=o+" FPS ("+a+"-"+c+")",x(w,Math.min(30,30-o/100*30)),t=d,s=0),d},update:function(){e=this.end()}}}var h=n(30),m=n(123),b=n(17);n(276);var f=n(0),j=n(1);var v=[{name:"chapter-01",children:[{name:"BasicSkeleton",path:"/BasicSkeleton",component:function(){var e=Object(u.useRef)(null);return Object(u.useEffect)((function(){!function(){var t=new l.o,n=new l.l(45,window.innerWidth/window.innerHeight,.1,1e3),r=new l.t;r.setClearColor(new l.e(0)),r.setSize(window.innerWidth,window.innerHeight);var i=new l.b(20);t.add(i);var o=new l.m(60,20),a=new l.j({color:11184810}),c=new l.i(o,a);c.rotation.x=-.5*Math.PI,c.position.set(15,0,0),t.add(c);var s=new l.c(4,4,4),d=new l.j({color:16711680,wireframe:!0}),u=new l.i(s,d);u.position.set(-4,3,0),t.add(u);var p=new l.p(4,20,20),w=new l.j({color:7829503,wireframe:!0}),h=new l.i(p,w);h.position.set(20,4,2),t.add(h),n.position.set(-30,40,30),n.lookAt(t.position),e.current.appendChild(r.domElement),r.render(t,n)}()}),[]),Object(s.jsx)("div",{ref:e})}},{name:"MaterialsLight",path:"/MaterialsLight",component:function(){var e=Object(u.useRef)(null);return Object(u.useEffect)((function(){!function(){var t=new l.o,n=new l.l(45,window.innerWidth/window.innerHeight,.1,1e3),r=new l.t;r.setClearColor(new l.e(0)),r.setSize(window.innerWidth,window.innerHeight);var i=new l.m(60,20),o=new l.k({color:16777215}),a=new l.i(i,o);a.rotation.x=-.5*Math.PI,a.position.set(15,0,0),t.add(a);var c=new l.c(4,4,4),s=new l.k({color:16711680}),d=new l.i(c,s);d.position.set(-4,3,0),t.add(d);var u=new l.p(4,20,20),p=new l.k({color:7829503}),w=new l.i(u,p);w.position.set(20,4,2),t.add(w);var h=new l.q(16777215);h.position.set(-40,40,-15),h.shadow.mapSize=new l.r(1024,1024),h.shadow.camera.far=130,h.shadow.camera.near=40,t.add(h),h.castShadow=!0,r.shadowMap.enabled=!0,a.receiveShadow=!0,d.castShadow=!0,w.castShadow=!0,n.position.set(-30,40,30),n.lookAt(t.position),e.current.appendChild(r.domElement),r.render(t,n)}()}),[]),Object(s.jsx)("div",{ref:e})}},{name:"MaterialsLightAnimation",path:"/MaterialsLightAnimation",component:function(){var e=Object(u.useRef)(null),t=Object(u.useRef)({step:0}),n=Object(u.useCallback)((function(){var e=t.current,r=e.stats,i=e.scene,o=e.camera,a=e.renderer,c=e.cube,s=e.sphere,d=e.step;r.update(),c.rotation.x+=.02,c.rotation.y+=.02,c.rotation.z+=.02,t.current.step+=.04,s.position.x=20+10*Math.cos(d),s.position.y=2+10*Math.abs(Math.sin(d)),t.current.timer=requestAnimationFrame(n),a.render(i,o)}),[]);return Object(u.useEffect)((function(){return function(){var n=new l.o,r=new l.l(45,window.innerWidth/window.innerHeight,.1,1e3),i=new l.t;i.setClearColor(new l.e(0)),i.setSize(window.innerWidth,window.innerHeight);var o=new l.m(60,20),a=new l.k({color:16777215}),c=new l.i(o,a);c.rotation.x=-.5*Math.PI,c.position.set(15,0,0),n.add(c);var s=new l.c(4,4,4),d=new l.k({color:16711680}),u=new l.i(s,d);u.position.set(-4,3,0),n.add(u);var w=new l.p(4,20,20),h=new l.k({color:7829503}),m=new l.i(w,h);m.position.set(20,4,2),n.add(m);var b=new l.q(16777215);b.position.set(-40,40,-15),b.shadow.mapSize=new l.r(1024,1024),b.shadow.camera.far=130,b.shadow.camera.near=40,n.add(b),b.castShadow=!0,i.shadowMap.enabled=!0,c.receiveShadow=!0,u.castShadow=!0,m.castShadow=!0,r.position.set(-30,40,30),r.lookAt(n.position),e.current.appendChild(i.domElement),i.render(n,r),t.current=Object(p.a)(Object(p.a)({},t.current),{},{scene:n,camera:r,renderer:i,cube:u,sphere:m})}(),function(){var n=new w;n.setMode(0),n.domElement.style.position="absolute",n.domElement.style.right="0px",n.domElement.style.top="0px",e.current.appendChild(n.domElement),t.current.stats=n}(),n(),function(){t.current.timer&&cancelAnimationFrame(t.current.timer)}}),[n]),Object(s.jsx)("div",{ref:e})}},{name:"ControlGui",path:"/ControlGui",component:function(){var e=Object(u.useRef)(null),t=Object(u.useRef)({step:0}),n=Object(u.useState)({rotationSpeed:.02,bouncingSpeed:.03}),r=Object(h.a)(n,2),i=r[0],o=r[1],a=Object(u.useCallback)((function(){var e=t.current,n=e.stats,r=e.scene,o=e.camera,c=e.renderer,s=e.cube,d=e.sphere,l=e.step;e.controls.update(),n.update(),s.rotation.x+=i.rotationSpeed,s.rotation.y+=i.rotationSpeed,s.rotation.z+=i.rotationSpeed,t.current.step+=i.bouncingSpeed,d.position.x=20+10*Math.cos(l),d.position.y=2+10*Math.abs(Math.sin(l)),t.current.timer=requestAnimationFrame(a),c.render(r,o)}),[i]);function c(){var e=t.current,n=e.camera,r=e.renderer;n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}return Object(u.useEffect)((function(){return function(){var n=new l.o,r=new l.l(45,window.innerWidth/window.innerHeight,.1,1e3),i=new l.t;i.setClearColor(new l.e(0)),i.setSize(window.innerWidth,window.innerHeight);var o=new l.m(60,20),a=new l.k({color:16777215}),c=new l.i(o,a);c.rotation.x=-.5*Math.PI,c.position.set(15,0,0),n.add(c);var s=new l.c(4,4,4),d=new l.k({color:16711680}),u=new l.i(s,d);u.position.set(-4,3,0),n.add(u);var w=new l.p(4,20,20),h=new l.k({color:7829503}),b=new l.i(w,h);b.position.set(20,4,2),n.add(b);var f=new l.q(16777215);f.position.set(-40,40,-15),f.shadow.mapSize=new l.r(1024,1024),f.shadow.camera.far=130,f.shadow.camera.near=40,n.add(f),f.castShadow=!0,i.shadowMap.enabled=!0,c.receiveShadow=!0,u.castShadow=!0,b.castShadow=!0,r.position.set(-30,40,30),r.lookAt(n.position),e.current.appendChild(i.domElement),i.render(n,r);var j=new m.a(r,i.domElement);t.current=Object(p.a)(Object(p.a)({},t.current),{},{scene:n,camera:r,renderer:i,cube:u,sphere:b,controls:j})}(),function(){var n=new w;n.setMode(0),n.domElement.style.position="absolute",n.domElement.style.right="16px",n.domElement.style.top="60px",e.current.appendChild(n.domElement),t.current.stats=n}(),window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[]),Object(u.useEffect)((function(){return a(),function(){t.current.timer&&(cancelAnimationFrame(t.current.timer),t.current.timer=null)}}),[a]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{ref:e}),Object(s.jsxs)(b.c,{data:i,onUpdate:function(e){o((function(t){return Object(p.a)(Object(p.a)({},t),e)}))},children:[Object(s.jsx)(b.b,{path:"rotationSpeed",label:"RotationSpeed",min:0,max:.1,step:.01}),Object(s.jsx)(b.b,{path:"bouncingSpeed",label:"BouncingSpeed",min:0,max:.1,step:.01})]})]})}}]},{name:"chapter-02",children:[{name:"BasicScene",path:"/BasicScene",component:function(){var e=Object(u.useRef)(null),t=Object(u.useRef)({step:0}),n=Object(u.useState)({}),r=Object(h.a)(n,2),i=r[0],o=r[1],a=Object(u.useCallback)((function(){var e=t.current,n=e.stats,r=e.scene,o=e.camera,c=e.renderer,s=e.plane;n.update(),r.traverse((function(e){e instanceof l.i&&e!==s&&(e.rotation.x+=i.rotationSpeed,e.rotation.y+=i.rotationSpeed,e.rotation.z+=i.rotationSpeed)})),t.current.step+=.04,t.current.timer=requestAnimationFrame(a),c.render(r,o)}),[i]);function c(){var e=t.current,n=e.camera,r=e.renderer;n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}return Object(u.useEffect)((function(){return function(){var n=new l.o,r=new l.l(45,window.innerWidth/window.innerHeight,.1,1e3),i=new l.t;i.setClearColor(new l.e(15658734)),i.setSize(window.innerWidth,window.innerHeight),i.shadowMap.enabled=!0;var a=new l.m(60,40,1,1),c=new l.k({color:16777215}),s=new l.i(a,c);s.receiveShadow=!0,s.rotation.x=-.5*Math.PI,s.position.x=0,s.position.y=0,s.position.z=0,n.add(s),r.position.set(-30,40,30),r.lookAt(n.position);var d=new l.a(789516);n.add(d);var u=new l.q(16777215);u.position.set(-40,60,-10),u.castShadow=!0,n.add(u),n.fog=new l.g(16777215,.015,100),e.current.appendChild(i.domElement),i.render(n,r),o(new(function(){function e(){Object(f.a)(this,e),this.rotationSpeed=.02,this.numberOfObjects=n.children.length}return Object(j.a)(e,[{key:"removeCube",value:function(){var e=n.children,t=e[e.length-1];t instanceof l.i&&(n.remove(t),this.numberOfObjects=n.children.length)}},{key:"addCube",value:function(){var e=Math.ceil(3*Math.random()),t=new l.c(e,e,e),r=new l.k({color:16777215*Math.random()}),i=new l.i(t,r);i.castShadow=!0,i.name="cube-"+n.children.length,i.position.x=-30+Math.round(Math.random()*a.parameters.width),i.position.y=Math.round(5*Math.random()),i.position.z=-20+Math.round(Math.random()*a.parameters.height),n.add(i),this.numberOfObjects=n.children.length}},{key:"outputObjects",value:function(){console.log(n.children)}}]),e}())),t.current=Object(p.a)(Object(p.a)({},t.current),{},{scene:n,camera:r,renderer:i,plane:s})}(),function(){var n=new w;n.setMode(0),n.domElement.style.position="absolute",n.domElement.style.right="16px",n.domElement.style.top="120px",e.current.appendChild(n.domElement),t.current.stats=n}(),window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[]),Object(u.useEffect)((function(){return a(),function(){t.current.timer&&(cancelAnimationFrame(t.current.timer),t.current.timer=null)}}),[a]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{ref:e}),Object(s.jsxs)(b.c,{data:i,onUpdate:function(e){o((function(t){return Object(p.a)(Object(p.a)({},t),e)}))},children:[Object(s.jsx)(b.b,{path:"rotationSpeed",label:"RotationSpeed",min:0,max:.1,step:.01}),Object(s.jsx)(b.a,{label:"addCube",onClick:function(){i.addCube()}}),Object(s.jsx)(b.a,{label:"removeCube",onClick:function(){i.removeCube()}}),Object(s.jsx)(b.a,{label:"outputObjects",onClick:function(){i.outputObjects()}})]})]})}},{name:"CustomGeometry",path:"/CustomGeometry",component:function(){var e=Object(u.useRef)(null),t=Object(u.useRef)({}),n=Object(u.useState)({}),r=Object(h.a)(n,2),i=r[0],o=r[1],a=Object(u.useCallback)((function(){var e=t.current,n=e.stats,r=e.scene,i=e.camera,o=e.renderer;n.update(),t.current.timer=requestAnimationFrame(a),o.render(r,i)}),[]);function c(){var e=t.current,n=e.camera,r=e.renderer;n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}return Object(u.useEffect)((function(){return function(){var n=new l.o,r=new l.l(45,window.innerWidth/window.innerHeight,.1,1e3),i=new l.t;i.setClearColor(new l.e(15658734)),i.setSize(window.innerWidth,window.innerHeight),i.shadowMap.enabled=!0;var o=new l.m(60,40,1,1),a=new l.k({color:16777215}),c=new l.i(o,a);c.receiveShadow=!0,c.rotation.x=-.5*Math.PI,c.position.x=0,c.position.y=0,c.position.z=0,n.add(c),r.position.set(-20,25,20),r.lookAt(new l.s(5,0,0));var s=new l.q(16777215);s.position.set(-40,60,10),s.castShadow=!0,n.add(s),e.current.appendChild(i.domElement),i.render(n,r);var d=[new l.s(1,3,1),new l.s(1,3,-1),new l.s(1,-1,1),new l.s(1,-1,-1),new l.s(-1,3,-1),new l.s(-1,3,1),new l.s(-1,-1,-1),new l.s(-1,-1,1)],u=function(e,t,n){return[d[e],d[t],d[n]]},p=[u(0,2,1),u(2,3,1),u(4,6,5),u(6,7,5),u(4,5,1),u(5,0,1),u(7,6,2),u(6,3,2),u(5,7,0),u(7,2,0),u(1,3,4),u(3,6,4)],w=new l.d;w.setFromPoints(p.flat(1)),w.computeVertexNormals();var h=new l.k({opacity:.6,color:4521796,transparent:!0,wireframe:!0}),m=new l.i(w,h);m.position.setY(1.1),m.children.forEach((function(e){e.castShadow=!0})),n.add(m),console.log(m),t.current={scene:n,camera:r,renderer:i,plane:c}}(),function(){var n=new w;n.setMode(0),n.domElement.style.position="absolute",n.domElement.style.right="16px",n.domElement.style.bottom="16px",e.current.appendChild(n.domElement),t.current.stats=n}(),window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[]),Object(u.useEffect)((function(){return a(),function(){t.current.timer&&(cancelAnimationFrame(t.current.timer),t.current.timer=null)}}),[a]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{ref:e}),Object(s.jsxs)(b.c,{data:i,onUpdate:function(e){o((function(t){return Object(p.a)(Object(p.a)({},t),e)}))},children:[Object(s.jsx)(b.b,{path:"rotationSpeed",label:"RotationSpeed",min:0,max:.1,step:.01}),Object(s.jsx)(b.a,{label:"addCube",onClick:function(){i.addCube()}}),Object(s.jsx)(b.a,{label:"removeCube",onClick:function(){i.removeCube()}}),Object(s.jsx)(b.a,{label:"outputObjects",onClick:function(){i.outputObjects()}})]})]})}}]}];function x(){return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(d,{data:v}),Object(s.jsxs)(o.d,{children:[Object(s.jsx)(o.b,{exact:!0,path:"/",render:function(){return Object(s.jsx)(o.a,{to:"/BasicSkeleton"})}}),v.map((function(e){return e.children})).flat(1).map((function(e,t){var n=e.path,r=e.component;return Object(s.jsx)(o.b,{path:n,component:r},t)}))]})]})}var O=n(80);i.a.render(Object(s.jsx)(O.a,{children:Object(s.jsx)(x,{})}),document.getElementById("root"))}},[[277,1,2]]]);
//# sourceMappingURL=main.6c6d6168.chunk.js.map